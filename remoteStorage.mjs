const a0_0x4e8580=a0_0x44d9;(function(_0x1ff15b,_0x4d9b50){const _0x1f0c2b=a0_0x44d9,_0x452518=_0x1ff15b();while(!![]){try{const _0xcc6cf5=parseInt(_0x1f0c2b(0x188))/0x1+parseInt(_0x1f0c2b(0x18d))/0x2+parseInt(_0x1f0c2b(0x18b))/0x3*(-parseInt(_0x1f0c2b(0x1aa))/0x4)+-parseInt(_0x1f0c2b(0x1ab))/0x5+parseInt(_0x1f0c2b(0x18c))/0x6*(parseInt(_0x1f0c2b(0x1a5))/0x7)+parseInt(_0x1f0c2b(0x19b))/0x8*(-parseInt(_0x1f0c2b(0x189))/0x9)+-parseInt(_0x1f0c2b(0x19f))/0xa;if(_0xcc6cf5===_0x4d9b50)break;else _0x452518['push'](_0x452518['shift']());}catch(_0x572c53){_0x452518['push'](_0x452518['shift']());}}}(a0_0x4d5b,0x90fe0));function a0_0x44d9(_0x2fb264,_0x13259d){const _0x4d5b19=a0_0x4d5b();return a0_0x44d9=function(_0x44d9cb,_0x105fd5){_0x44d9cb=_0x44d9cb-0x184;let _0xf5e66c=_0x4d5b19[_0x44d9cb];return _0xf5e66c;},a0_0x44d9(_0x2fb264,_0x13259d);}function a0_0x4d5b(){const _0x2f22fe=['/list','GET','763492YQGReK','2741785ibgwRJ','removeItem','apiFetch','name','list','push','/getWithMetadata','keys','https://remote-storage.dan-5d7.workers.dev/v1','startsWith','\x20â†’\x20ERROR:\x20','/delete','requestHeaders','302391OJQsAt','162YMElNN','catch','3GrvQuq','494106wtLxih','1269912IJUqLu','namespace','getItem','POST','endpoint','all','length','toString','stringify','setItem','keysPaged','getNamespace','some','getItemWithMetadata','56752wiCZsq','/get','DELETE','login','3823980GVSeZP','json','log','map','/login','append','77XmGbRK','application/json','search'];a0_0x4d5b=function(){return _0x2f22fe;};return a0_0x4d5b();}export class RemoteStorage{constructor(_0x333928,_0x188256){const _0x34dfc8=a0_0x44d9;this[_0x34dfc8(0x18e)]=_0x333928,this[_0x34dfc8(0x191)]=_0x34dfc8(0x1b3),this[_0x34dfc8(0x187)]={'Authorization':_0x188256,'Content-Type':'application/json'};}async[a0_0x4e8580(0x19e)](_0xe2ff45,_0x3e324f){const _0x17f1f0=a0_0x4e8580,_0x53b3c3=await fetch(this[_0x17f1f0(0x191)]+_0x17f1f0(0x1a3),{'method':_0x17f1f0(0x190),'headers':{'Content-Type':_0x17f1f0(0x1a6)},'body':JSON['stringify']({'namespace':namespace,'userID':_0xe2ff45,'password':_0x3e324f})});if(_0x53b3c3['status']!=0xc8)throw{'error':'unknown\x20error'};const _0x46b577=await _0x53b3c3[_0x17f1f0(0x1a0)]()[_0x17f1f0(0x18a)](()=>({})),_0x3c9e95=_0x46b577['token'];return this[_0x17f1f0(0x187)]={'Authorization':_0x3c9e95,'Content-Type':_0x17f1f0(0x1a6)},_0x3c9e95;}async[a0_0x4e8580(0x1b2)](){const _0x212e68=a0_0x4e8580;let _0x555391=[],_0x120e64=null;while(!![]){const {keys:_0xd756dd,cursor:_0xa38766,list_complete:_0x2e0c3e}=await this[_0x212e68(0x197)]({'cursor':_0x120e64});_0x555391[_0x212e68(0x1b0)](..._0xd756dd);if(_0x2e0c3e)break;_0x120e64=_0xa38766;}return _0x555391;}async[a0_0x4e8580(0x197)]({limit:limit=0x3e8,cursor:_0x38f40a=null}={}){const _0x597384=a0_0x4e8580,{items:_0x5d6fd6,cursor:_0x94f5ce,list_complete:_0x77d927}=await this['list']({'limit':limit,'cursor':_0x38f40a}),_0x4a3f54=_0x5d6fd6[_0x597384(0x1a2)](_0x10d285=>_0x10d285[_0x597384(0x1ae)]);return{'keys':_0x4a3f54,'cursor':_0x94f5ce,'list_complete':_0x77d927};}async[a0_0x4e8580(0x198)](..._0x394ddb){const _0x1f3b24=a0_0x4e8580,_0x21d27d={};let _0x22fbe4=null;while(!![]){const {items:_0x558a2c,cursor:_0x17ebdb,list_complete:_0x4ba797}=await this[_0x1f3b24(0x1af)]({'cursor':_0x22fbe4}),_0x537db3=_0x394ddb[_0x1f3b24(0x193)]?_0x558a2c['filter'](_0x3433b5=>_0x394ddb[_0x1f3b24(0x199)](_0x1b5af6=>_0x3433b5[_0x1f3b24(0x1ae)][_0x1f3b24(0x184)](_0x1b5af6))):_0x558a2c,_0x40a244=_0x537db3[_0x1f3b24(0x1a2)](async({name:_0x655009,metadata:_0x1065aa})=>{const _0x1ff2d9=_0x1f3b24,_0x3cef58=await this[_0x1ff2d9(0x18f)](_0x655009);_0x21d27d[_0x655009]={'value':_0x3cef58,'metadata':_0x1065aa};});await Promise[_0x1f3b24(0x192)](_0x40a244);if(_0x4ba797)break;_0x22fbe4=_0x17ebdb;}return _0x21d27d;}async[a0_0x4e8580(0x1af)]({limit:limit=0x3e8,cursor:cursor=null}={}){const _0xc68acd=a0_0x4e8580;return this['apiFetch'](_0xc68acd(0x1a9),_0xc68acd(0x1a8),null,{'limit':limit,'cursor':cursor});}async[a0_0x4e8580(0x196)](_0x480839,_0x799ae6){const _0x37cc0a=a0_0x4e8580;return this[_0x37cc0a(0x1ad)](_0x37cc0a(0x190),'/set',{'key':_0x480839,'value':_0x799ae6});}async[a0_0x4e8580(0x18f)](_0x4898f5){const _0x1883b3=a0_0x4e8580;return this[_0x1883b3(0x1ad)](_0x1883b3(0x1a9),_0x1883b3(0x19c),null,{'key':_0x4898f5});}async[a0_0x4e8580(0x19a)](_0x56b80d){const _0x8d0cad=a0_0x4e8580;return this[_0x8d0cad(0x1ad)](_0x8d0cad(0x1a9),_0x8d0cad(0x1b1),null,{'key':_0x56b80d});}async['removeItem'](_0x83d720){const _0x3f7cb1=a0_0x4e8580;return this[_0x3f7cb1(0x1ad)](_0x3f7cb1(0x19d),_0x3f7cb1(0x186),null,{'key':_0x83d720});}async['clear'](){const _0x5ddacc=a0_0x4e8580,_0x29b429=await this[_0x5ddacc(0x1b2)](),_0x3afe7e=_0x29b429[_0x5ddacc(0x1a2)](_0x20ddea=>this[_0x5ddacc(0x1ac)](_0x20ddea));return await Promise[_0x5ddacc(0x192)](_0x3afe7e),null;}async[a0_0x4e8580(0x1ad)](_0x5e38e5,_0x248d16,_0x4f2ac7=null,_0x22c215={}){const _0x1e1fce=a0_0x4e8580;_0x22c215={..._0x22c215,'namespace':this[_0x1e1fce(0x18e)]};let _0xbc9b8=new URL(''+this['endpoint']+_0x248d16);const _0x478887=new URLSearchParams();for(const [_0x33a872,_0x260c0a]of Object['entries'](_0x22c215)){_0x260c0a!==undefined&&_0x260c0a!==null&&_0x478887[_0x1e1fce(0x1a4)](_0x33a872,_0x260c0a);}_0xbc9b8[_0x1e1fce(0x1a7)]=_0x478887[_0x1e1fce(0x194)]();const _0x3f941a={'method':_0x5e38e5,'headers':this[_0x1e1fce(0x187)]};if(_0x4f2ac7)_0x3f941a['body']=JSON[_0x1e1fce(0x195)](_0x4f2ac7);try{const _0x35b896=await fetch(_0xbc9b8,_0x3f941a),_0x1e78a9=await _0x35b896[_0x1e1fce(0x1a0)]();if(!_0x35b896['ok'])throw{'error':_0x1e78a9};return _0x1e78a9;}catch(_0x5631c6){console[_0x1e1fce(0x1a1)](_0x5e38e5+'\x20'+_0xbc9b8+_0x1e1fce(0x185)+_0x5631c6['message']);throw _0x5631c6;}}}