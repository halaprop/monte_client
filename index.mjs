const a0_0x350d93=a0_0xdd00;(function(_0x5e4f26,_0x3b56b9){const _0x7f2e7d=a0_0xdd00,_0x9f5d4e=_0x5e4f26();while(!![]){try{const _0x20c583=parseInt(_0x7f2e7d(0xe2))/0x1+parseInt(_0x7f2e7d(0xdc))/0x2*(-parseInt(_0x7f2e7d(0xe0))/0x3)+-parseInt(_0x7f2e7d(0xe5))/0x4+-parseInt(_0x7f2e7d(0xd7))/0x5*(-parseInt(_0x7f2e7d(0xba))/0x6)+parseInt(_0x7f2e7d(0xf0))/0x7+parseInt(_0x7f2e7d(0xea))/0x8*(parseInt(_0x7f2e7d(0xb5))/0x9)+-parseInt(_0x7f2e7d(0xec))/0xa;if(_0x20c583===_0x3b56b9)break;else _0x9f5d4e['push'](_0x9f5d4e['shift']());}catch(_0x6ef4cd){_0x9f5d4e['push'](_0x9f5d4e['shift']());}}}(a0_0xd8a6,0xe0c8b));import*as a0_0x549397 from'./utils.mjs';function a0_0xdd00(_0x21f3cc,_0x1c6f19){const _0xd8a65b=a0_0xd8a6();return a0_0xdd00=function(_0xdd0098,_0x467d10){_0xdd0098=_0xdd0098-0xb4;let _0x8d01fe=_0xd8a65b[_0xdd0098];return _0x8d01fe;},a0_0xdd00(_0x21f3cc,_0x1c6f19);}import{renderFamiliesTable,onSearchFamiliesInput}from'./familyTab.mjs';import{renderStaffTable,onSearchStaffInput}from'./staffTab.mjs';import{renderClassroomsTable,onSearchClassroomsInput}from'./classroomsTab.mjs';import{renderSettingsTable}from'./settingsTab.mjs';function a0_0xd8a6(){const _0xf416fa=['detail-container','remove','click','tabs-root','CUSD.Montclaire.','add','searchInputValues','children','</p>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','email','scrollTo','hide','5nxzQkR','dispatchEvent','shown','input','search-clear-button','2cycrbR','activeTabIndex','indexOf','detail-back-button','206622LSSQqL','submit','1194217NKrFeL','from','tab','5646108VnSfFl','search-input','password','parentNode','innerHTML','8iwtiqi','none','15338140wjCHdz','getElementById','removeEventListener','app-title','12004202qrWZwQ','getUserState','Unable\x20to\x20login','show','value','login-alert-container','trim','focus','7131501oWxfRy','setEdition','classList','style','MONTEBOOK_AUTH','1400628jacPQB','flex','setUserState','modal','login-form','display','.uk-switcher\x20li.uk-active','mb_user_token','spinner','login','querySelector','login-modal','getEdition','addEventListener','Montebook\x20','getItem','currentEditionYear'];a0_0xd8a6=function(){return _0xf416fa;};return a0_0xd8a6();}import{RemoteStorage}from'./remoteStorage.mjs';let MB_USER_TOKEN=localStorage[a0_0x350d93(0xc9)](a0_0x350d93(0xc1));const remoteStorage=new RemoteStorage(a0_0x350d93(0xb9),MB_USER_TOKEN);UIkit['util']['on']('#tab-content',a0_0x350d93(0xd9),function(){const _0xce942c=a0_0x350d93,_0x299ac2=a0_0x549397['getUserState'](),_0x1a2536=_0x299ac2[_0xce942c(0xd1)];let _0x3f02f4=_0x299ac2[_0xce942c(0xdd)];_0x1a2536[_0x3f02f4]=searchInput[_0xce942c(0xf4)];const _0x5672bd=document[_0xce942c(0xc4)](_0xce942c(0xc0));_0x3f02f4=Array[_0xce942c(0xe3)](_0x5672bd[_0xce942c(0xe8)][_0xce942c(0xd2)])[_0xce942c(0xde)](_0x5672bd),window[_0xce942c(0xd5)](0x0,0x0),searchInput[_0xce942c(0xf4)]=_0x1a2536[_0x3f02f4],_0x299ac2[_0xce942c(0xd1)]=_0x1a2536,_0x299ac2[_0xce942c(0xdd)]=_0x3f02f4,a0_0x549397['setUserState'](_0x299ac2);});function setActiveTab(_0xf7cdf9){const _0x17919d=a0_0x350d93,_0x2b57fc=document[_0x17919d(0xed)](_0x17919d(0xce));UIkit[_0x17919d(0xe4)](_0x2b57fc)[_0x17919d(0xf3)](_0xf7cdf9);}const searchInput=document['getElementById'](a0_0x350d93(0xe6));searchInput[a0_0x350d93(0xc7)](a0_0x350d93(0xda),_0x4ab169=>{const _0x422608=a0_0x350d93,_0x8fa371=a0_0x549397[_0x422608(0xf1)]();let _0x47b50f=_0x8fa371[_0x422608(0xdd)];if(_0x47b50f==0x0)onSearchFamiliesInput(_0x4ab169);else{if(_0x47b50f==0x1)onSearchStaffInput(_0x4ab169);else _0x47b50f==0x2&&onSearchClassroomsInput(_0x4ab169);}}),document['getElementById'](a0_0x350d93(0xdb))[a0_0x350d93(0xc7)](a0_0x350d93(0xcd),_0x218454=>{const _0x216a5e=a0_0x350d93;searchInput[_0x216a5e(0xf4)]='',searchInput[_0x216a5e(0xb4)](),searchInput[_0x216a5e(0xd8)](new Event(_0x216a5e(0xda)));}),document[a0_0x350d93(0xed)](a0_0x350d93(0xdf))[a0_0x350d93(0xc7)](a0_0x350d93(0xcd),_0x40ff5c=>{setDetailContainerHidden(!![]);}),start();function start(){const _0x394bd1=a0_0x350d93,_0x3f6424=a0_0x549397['getUserState']()[_0x394bd1(0xca)];if(_0x3f6424){document[_0x394bd1(0xed)](_0x394bd1(0xef))[_0x394bd1(0xe9)]=_0x394bd1(0xc8)+_0x3f6424;const _0xfca2a9=a0_0x549397[_0x394bd1(0xc6)](_0x3f6424);initializeTables();}else setActiveTab(0x3),renderSettingsTable();}export async function switchToEdition(_0x440543){const _0x5a5a07=a0_0x350d93;let _0x545cba=a0_0x549397[_0x5a5a07(0xc6)](_0x440543);if(!_0x545cba){if(!MB_USER_TOKEN){MB_USER_TOKEN=await runLogin();if(MB_USER_TOKEN)localStorage['setItem']('mb_user_token',MB_USER_TOKEN);else return![];}const _0x42556e=document[_0x5a5a07(0xed)](_0x5a5a07(0xc2));_0x42556e[_0x5a5a07(0xb8)][_0x5a5a07(0xbf)]=_0x5a5a07(0xbb);const _0xb74b55=_0x5a5a07(0xcf)+_0x440543;_0x545cba=await remoteStorage[_0x5a5a07(0xc9)](_0xb74b55),_0x42556e['style']['display']=_0x5a5a07(0xeb);if(!_0x545cba)return![];}a0_0x549397[_0x5a5a07(0xb6)](_0x440543,_0x545cba);let _0x1ba3c0=a0_0x549397[_0x5a5a07(0xf1)]();return _0x1ba3c0[_0x5a5a07(0xca)]=_0x440543,a0_0x549397[_0x5a5a07(0xbc)](_0x1ba3c0),document[_0x5a5a07(0xed)](_0x5a5a07(0xef))[_0x5a5a07(0xe9)]=_0x5a5a07(0xc8)+(_0x440543||''),initializeTables(),setActiveTab(0x0),!![];}function runLogin(){return new Promise(_0x593655=>{const _0x29ffbe=a0_0xdd00,_0x62bea5=document[_0x29ffbe(0xed)](_0x29ffbe(0xc5)),_0x5f85d3=UIkit[_0x29ffbe(0xbd)](_0x62bea5),_0x1adb03=document[_0x29ffbe(0xed)](_0x29ffbe(0xbe)),_0x4c01a7=document[_0x29ffbe(0xed)]('spinner');let _0x542d98=![];const _0xc641ba=()=>{const _0x32d3ce=_0x29ffbe;_0x1adb03[_0x32d3ce(0xee)](_0x32d3ce(0xe1),_0x5d426e),_0x62bea5['removeEventListener'](_0x32d3ce(0xd6),_0x8a84cd);if(_0x4c01a7)_0x4c01a7[_0x32d3ce(0xb8)]['display']=_0x32d3ce(0xeb);},_0x92587f=_0x475ae7=>{!_0x542d98&&(_0x542d98=!![],_0xc641ba(),_0x593655(_0x475ae7));},_0x8a84cd=()=>_0x92587f(null),_0x5d426e=async _0x6cc9e2=>{const _0xcb3237=_0x29ffbe;_0x6cc9e2['preventDefault']();const _0x494232=document[_0xcb3237(0xed)](_0xcb3237(0xd4))[_0xcb3237(0xf4)][_0xcb3237(0xf6)](),_0x3b6785=document[_0xcb3237(0xed)](_0xcb3237(0xe7))['value'];if(_0x4c01a7)_0x4c01a7[_0xcb3237(0xb8)][_0xcb3237(0xbf)]=_0xcb3237(0xbb);try{const _0x354d64=await remoteStorage[_0xcb3237(0xc3)](_0x494232,_0x3b6785);_0x62bea5['removeEventListener'](_0xcb3237(0xd6),_0x8a84cd),_0x92587f(_0x354d64),_0x5f85d3['hide']();}catch(_0x5ad0f0){showLoginAlert(_0xcb3237(0xf2));if(_0x4c01a7)_0x4c01a7[_0xcb3237(0xb8)][_0xcb3237(0xbf)]=_0xcb3237(0xeb);}};_0x1adb03['addEventListener'](_0x29ffbe(0xe1),_0x5d426e,{'once':![]}),_0x62bea5[_0x29ffbe(0xc7)]('hide',_0x8a84cd,{'once':![]}),_0x5f85d3[_0x29ffbe(0xf3)]();});}function showLoginAlert(_0x19a716){const _0x2795e8=a0_0x350d93,_0xce6f56=document[_0x2795e8(0xed)](_0x2795e8(0xf5));_0xce6f56[_0x2795e8(0xe9)]='\x0a\x20\x20\x20\x20<div\x20class=\x22uk-alert-danger\x22\x20uk-alert>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href\x20class=\x22uk-alert-close\x22\x20uk-close></a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x19a716+_0x2795e8(0xd3);}function initializeTables(){renderFamiliesTable(),renderClassroomsTable(),renderStaffTable(),renderSettingsTable();}export function setDetailContainerHidden(_0x5b5fa8){const _0x332e8c=a0_0x350d93,_0x4b61ef=document[_0x332e8c(0xed)](_0x332e8c(0xcb));_0x5b5fa8?_0x4b61ef[_0x332e8c(0xb7)][_0x332e8c(0xcc)](_0x332e8c(0xf3)):_0x4b61ef['classList'][_0x332e8c(0xd0)](_0x332e8c(0xf3));}