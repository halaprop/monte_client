const a0_0x51d4b0=a0_0x42f1;(function(_0x34ad2f,_0x1939ba){const _0x473ea5=a0_0x42f1,_0xc0ada=_0x34ad2f();while(!![]){try{const _0x5abb34=parseInt(_0x473ea5(0xaf))/0x1*(parseInt(_0x473ea5(0x7b))/0x2)+parseInt(_0x473ea5(0xa0))/0x3*(parseInt(_0x473ea5(0xbb))/0x4)+parseInt(_0x473ea5(0xb4))/0x5*(-parseInt(_0x473ea5(0x95))/0x6)+-parseInt(_0x473ea5(0x9d))/0x7+-parseInt(_0x473ea5(0x7d))/0x8*(parseInt(_0x473ea5(0x92))/0x9)+-parseInt(_0x473ea5(0xad))/0xa*(-parseInt(_0x473ea5(0x7e))/0xb)+parseInt(_0x473ea5(0xb1))/0xc;if(_0x5abb34===_0x1939ba)break;else _0xc0ada['push'](_0xc0ada['shift']());}catch(_0x94208b){_0xc0ada['push'](_0xc0ada['shift']());}}}(a0_0x3947,0xbe28b));import*as a0_0x13da02 from'./utils.mjs';import{renderFamiliesTable,onSearchFamiliesInput}from'./familyTab.mjs';import{renderStaffTable,onSearchStaffInput}from'./staffTab.mjs';import{renderClassroomsTable,onSearchClassroomsInput}from'./classroomsTab.mjs';import{renderSettingsTable}from'./settingsTab.mjs';import{RemoteStorage}from'./remoteStorage.mjs';let MB_USER_TOKEN=localStorage[a0_0x51d4b0(0xa1)]('mb_user_token');function a0_0x42f1(_0x35c5b3,_0x5770a4){const _0x3947a7=a0_0x3947();return a0_0x42f1=function(_0x42f198,_0x1ca444){_0x42f198=_0x42f198-0x78;let _0x22542e=_0x3947a7[_0x42f198];return _0x22542e;},a0_0x42f1(_0x35c5b3,_0x5770a4);}const remoteStorage=new RemoteStorage(a0_0x51d4b0(0xb0),MB_USER_TOKEN);UIkit[a0_0x51d4b0(0x99)]['on'](a0_0x51d4b0(0x78),a0_0x51d4b0(0xb5),function(){const _0x248392=a0_0x51d4b0,_0x117ad6=a0_0x13da02[_0x248392(0xb8)](),_0x28aaeb=_0x117ad6[_0x248392(0x7c)];let _0xf6caac=_0x117ad6[_0x248392(0x98)];_0x28aaeb[_0xf6caac]=searchInput[_0x248392(0x8f)];const _0x420a40=document[_0x248392(0xb2)](_0x248392(0x79));_0xf6caac=Array[_0x248392(0x9a)](_0x420a40[_0x248392(0x7a)][_0x248392(0x89)])[_0x248392(0xa2)](_0x420a40),window[_0x248392(0x8e)](0x0,0x0),searchInput[_0x248392(0x8f)]=_0x28aaeb[_0xf6caac],_0x117ad6[_0x248392(0x7c)]=_0x28aaeb,_0x117ad6[_0x248392(0x98)]=_0xf6caac,a0_0x13da02[_0x248392(0x93)](_0x117ad6);});function setActiveTab(_0x183097){const _0x3ce901=a0_0x51d4b0,_0xb064ec=document[_0x3ce901(0x9e)]('tabs-root');UIkit['tab'](_0xb064ec)[_0x3ce901(0x86)](_0x183097);}const searchInput=document[a0_0x51d4b0(0x9e)](a0_0x51d4b0(0x91));function a0_0x3947(){const _0x2fe99a=['\x0a\x20\x20\x20\x20<div\x20class=\x22uk-alert-danger\x22\x20uk-alert>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href\x20class=\x22uk-alert-close\x22\x20uk-close></a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','activeTabIndex','util','from','CUSD.Montclaire.','removeEventListener','3906119JlEWhA','getElementById','modal','3tgFktJ','getItem','indexOf','addEventListener','setEdition','Unable\x20to\x20login','detail-back-button','submit','login-alert-container','mb_user_token','detail-container','innerHTML','remove','10gtQEeZ','hide','1OAXEqA','MONTEBOOK_AUTH','29976612FKpQXF','querySelector','input','5CdfGLU','shown','flex','style','getUserState','display','password','806500ewqQAW','#tab-content','.uk-switcher\x20li.uk-active','parentNode','2233766wvQNTU','searchInputValues','1352xRVURM','2206567zGFIFA','preventDefault','Montebook\x20','getEdition','none','email','currentEditionYear','app-title','show','classList','setItem','children','login-modal','add','search-clear-button','focus','scrollTo','value','</p>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','search-input','72099hRixyV','setUserState','click','7958334mySdne','trim'];a0_0x3947=function(){return _0x2fe99a;};return a0_0x3947();}searchInput[a0_0x51d4b0(0xa3)](a0_0x51d4b0(0xb3),_0x38f4c6=>{const _0x24b9a3=a0_0x13da02['getUserState']();let _0x13abcf=_0x24b9a3['activeTabIndex'];if(_0x13abcf==0x0)onSearchFamiliesInput(_0x38f4c6);else{if(_0x13abcf==0x1)onSearchStaffInput(_0x38f4c6);else _0x13abcf==0x2&&onSearchClassroomsInput(_0x38f4c6);}}),document[a0_0x51d4b0(0x9e)](a0_0x51d4b0(0x8c))[a0_0x51d4b0(0xa3)](a0_0x51d4b0(0x94),_0x31705d=>{const _0x418d1c=a0_0x51d4b0;searchInput[_0x418d1c(0x8f)]='',searchInput[_0x418d1c(0x8d)](),searchInput['dispatchEvent'](new Event(_0x418d1c(0xb3)));}),document[a0_0x51d4b0(0x9e)](a0_0x51d4b0(0xa6))[a0_0x51d4b0(0xa3)](a0_0x51d4b0(0x94),_0x4126f2=>{setDetailContainerHidden(!![]);}),start();function start(){const _0x193b3e=a0_0x51d4b0,_0x617b6b=a0_0x13da02[_0x193b3e(0xb8)]()[_0x193b3e(0x84)];if(_0x617b6b){document[_0x193b3e(0x9e)](_0x193b3e(0x85))[_0x193b3e(0xab)]='Montebook\x20'+_0x617b6b;const _0x57a6d0=a0_0x13da02[_0x193b3e(0x81)](_0x617b6b);initializeTables();}else setActiveTab(0x3),renderSettingsTable();}export async function switchToEdition(_0x16c723){const _0x2247d4=a0_0x51d4b0;let _0x1d86db=a0_0x13da02[_0x2247d4(0x81)](_0x16c723);if(!_0x1d86db){if(!MB_USER_TOKEN){MB_USER_TOKEN=await runLogin();if(MB_USER_TOKEN)localStorage[_0x2247d4(0x88)](_0x2247d4(0xa9),MB_USER_TOKEN);else return![];}const _0x92cc43=document[_0x2247d4(0x9e)]('spinner');_0x92cc43[_0x2247d4(0xb7)][_0x2247d4(0xb9)]=_0x2247d4(0xb6);const _0x31422e=_0x2247d4(0x9b)+_0x16c723;_0x1d86db=await remoteStorage[_0x2247d4(0xa1)](_0x31422e),_0x92cc43['style']['display']=_0x2247d4(0x82);if(!_0x1d86db)return![];}a0_0x13da02[_0x2247d4(0xa4)](_0x16c723,_0x1d86db);let _0xf71dae=a0_0x13da02['getUserState']();return _0xf71dae[_0x2247d4(0x84)]=_0x16c723,a0_0x13da02[_0x2247d4(0x93)](_0xf71dae),document[_0x2247d4(0x9e)](_0x2247d4(0x85))[_0x2247d4(0xab)]=_0x2247d4(0x80)+(_0x16c723||''),initializeTables(),setActiveTab(0x0),!![];}function runLogin(){return new Promise(_0x55b7ed=>{const _0x20a738=a0_0x42f1,_0x240dbd=document[_0x20a738(0x9e)](_0x20a738(0x8a)),_0x11115b=UIkit[_0x20a738(0x9f)](_0x240dbd),_0x47acd9=document['getElementById']('login-form'),_0x2fff08=document[_0x20a738(0x9e)]('spinner');let _0x10a643=![];const _0x256e12=()=>{const _0x5c81c2=_0x20a738;_0x47acd9['removeEventListener'](_0x5c81c2(0xa7),_0x532d7f),_0x240dbd[_0x5c81c2(0x9c)](_0x5c81c2(0xae),_0x135516);if(_0x2fff08)_0x2fff08[_0x5c81c2(0xb7)][_0x5c81c2(0xb9)]=_0x5c81c2(0x82);},_0x148acf=_0x3fa5a7=>{!_0x10a643&&(_0x10a643=!![],_0x256e12(),_0x55b7ed(_0x3fa5a7));},_0x135516=()=>_0x148acf(null),_0x532d7f=async _0x32e63d=>{const _0x386a3e=_0x20a738;_0x32e63d[_0x386a3e(0x7f)]();const _0x3eb82e=document[_0x386a3e(0x9e)](_0x386a3e(0x83))['value'][_0x386a3e(0x96)](),_0x3e5804=document[_0x386a3e(0x9e)](_0x386a3e(0xba))[_0x386a3e(0x8f)];if(_0x2fff08)_0x2fff08['style']['display']='flex';try{const _0x477c75=await remoteStorage['login'](_0x3eb82e,_0x3e5804);_0x240dbd[_0x386a3e(0x9c)]('hide',_0x135516),_0x148acf(_0x477c75),_0x11115b[_0x386a3e(0xae)]();}catch(_0x4eefbd){showLoginAlert(_0x386a3e(0xa5));if(_0x2fff08)_0x2fff08[_0x386a3e(0xb7)][_0x386a3e(0xb9)]=_0x386a3e(0x82);}};_0x47acd9[_0x20a738(0xa3)](_0x20a738(0xa7),_0x532d7f,{'once':![]}),_0x240dbd[_0x20a738(0xa3)](_0x20a738(0xae),_0x135516,{'once':![]}),_0x11115b[_0x20a738(0x86)]();});}function showLoginAlert(_0x6a95f9){const _0x1236cb=a0_0x51d4b0,_0x2105f9=document[_0x1236cb(0x9e)](_0x1236cb(0xa8));_0x2105f9[_0x1236cb(0xab)]=_0x1236cb(0x97)+_0x6a95f9+_0x1236cb(0x90);}function initializeTables(){renderFamiliesTable(),renderClassroomsTable(),renderStaffTable(),renderSettingsTable();}export function setDetailContainerHidden(_0x2c7416){const _0x4e83e8=a0_0x51d4b0,_0x4c0858=document[_0x4e83e8(0x9e)](_0x4e83e8(0xaa));_0x2c7416?_0x4c0858[_0x4e83e8(0x87)][_0x4e83e8(0xac)](_0x4e83e8(0x86)):_0x4c0858[_0x4e83e8(0x87)][_0x4e83e8(0x8b)](_0x4e83e8(0x86));}